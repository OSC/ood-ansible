---
- name: Converge
  hosts: instance
  roles:
    - role: ood-ansible
      install_from_src: false
      apache_service_enabled: true
      _container_connection: false
      _ssh_local_connection: true

- name: Custom
  hosts: custom
  roles:
    - role: ood-ansible
      install_from_src: false
      apache_service_enabled: true
      ood_apps:
        bc_desktop:
          title: "remote desktop"
          cluster: my_cluster
          attributes:
            desktop: xfce
          submit:
            script:
              native:
                - "<%= bc_num_slots.blank? ? 1 : bc_num_slots.to_i %>"
                - "1"
        files:
          env:
            ood_shell: /bin/bash
        dashboard:
          env:
            motd_format: markdown
      _container_connection: false
      _ssh_local_connection: true

- hosts: all
  tasks:
    - name: create ood user
      user:
        name: ood
    - name: create debug user apache auth user ood:ood
      copy:
        content: 'ood:$apr1$EOza4zZK$fuKLibf.WGN2E5MuovgQs.'
        dest: /opt/rh/httpd24/root/etc/httpd/.htpasswd
